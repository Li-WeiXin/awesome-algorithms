# 876 链表的中间结点

给定一个头结点为 head 的非空单链表，返回链表的中间结点。

如果有两个中间结点，则返回第二个中间结点。

**示例 1：**

```
输入：[1,2,3,4,5]
输出：此列表中的结点 3 (序列化形式：[3,4,5])
解释：
给定列表 [1,2,3,4,5]，返回值为 3 的结点。
注意，我们返回了一个 ListNode 类型的对象 ans，这样：
ans.val = 3, ans.next.val = 4, ans.next.next.val = 5, 以及 ans.next.next.next = NULL.
```

**示例 2：**

```
输入：[1,2,3,4,5,6]
输出：此列表中的结点 4 (序列化形式：[4,5,6])
解释：
由于该列表有两个中间结点，值分别为 3 和 4，我们返回第二个结点。
```

**提示：**
- 给定链表的结点数介于 1 和 100 之间。

## 解析

### 算法思路：快慢指针法

**核心思想：**
使用两个指针，一个快指针和一个慢指针。快指针每次移动两步，慢指针每次移动一步。当快指针到达链表末尾时，慢指针正好指向链表的中间节点。

**数学原理：**
- 设链表长度为 n
- 快指针移动速度是慢指针的 2 倍
- 当快指针到达末尾时，慢指针移动了 n/2 步
- 因此慢指针指向第 ⌈n/2⌉ 个节点（从 1 开始计数）

**边界情况处理：**
- 当链表长度为奇数时，快指针最终指向最后一个节点
- 当链表长度为偶数时，快指针最终指向 null
- 两种情况都能正确处理，返回第二个中间节点

### 代码实现

```javascript
var middleNode = function(head) {
    let slow = head, fast = head; // 初始化双指针指向头节点
    while (fast !== null && fast.next !== null) { // 快指针未到尾部时循环
        slow = slow.next;      // 慢指针移动 1 步
        fast = fast.next.next;  // 快指针移动 2 步
    }
    return slow; // 返回慢指针（中间节点）
};
```

### 详细代码解析

**1. 初始化阶段：**
```javascript
let slow = head, fast = head;
```
- 将慢指针 `slow` 和快指针 `fast` 都初始化为指向链表的头节点
- 这是快慢指针算法的标准起手式

**2. 循环条件：**
```javascript
while (fast !== null && fast.next !== null)
```
- `fast !== null`：确保快指针没有到达链表末尾
- `fast.next !== null`：确保快指针的下一个节点存在，避免访问 `null.next` 导致错误
- 这两个条件保证了快指针可以安全地移动两步

**3. 指针移动：**
```javascript
slow = slow.next;      // 慢指针移动 1 步
fast = fast.next.next; // 快指针移动 2 步
```
- 慢指针每次只移动一个节点
- 快指针每次移动两个节点
- 这样快指针的速度是慢指针的 2 倍

**4. 返回结果：**
```javascript
return slow;
```
- 当循环结束时，慢指针指向的就是链表的中间节点
- 根据题目要求，如果有两个中间节点，返回第二个

### 算法复杂度分析

**时间复杂度：** O(n)
- 只需要遍历链表一次
- 快指针移动 n/2 次，慢指针移动 n/2 次
- 总的时间复杂度为 O(n)

**空间复杂度：** O(1)
- 只使用了两个指针变量
- 不依赖链表长度，空间复杂度为常数

### 示例演示

以链表 `[1,2,3,4,5]` 为例：

```
初始状态：
slow: 1 → 2 → 3 → 4 → 5
fast: 1 → 2 → 3 → 4 → 5

第1次循环后：
slow: 2 → 3 → 4 → 5
fast: 3 → 4 → 5

第2次循环后：
slow: 3 → 4 → 5
fast: 5

第3次循环条件不满足，循环结束
返回 slow 指向的节点 3
```

### 进阶思考

**为什么快指针移动两步而不是其他步数？**
- 移动两步可以保证慢指针正好指向中间节点
- 如果移动三步，慢指针会指向 1/3 位置
- 如果移动四步，慢指针会指向 1/4 位置

**如何处理只有一个节点的情况？**
- 初始时 `fast.next` 为 null，循环不会执行
- 直接返回 `slow`（即头节点）

**如何处理有两个中间节点的情况？**
- 当链表长度为偶数时，快指针最终指向 null
- 慢指针会指向第二个中间节点
- 这正是题目要求的返回第二个中间节点
